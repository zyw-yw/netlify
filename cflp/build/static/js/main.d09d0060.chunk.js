(this.webpackJsonpcflp=this.webpackJsonpcflp||[]).push([[0],{11:function(e,t,n){"use strict";var r=n(97);n.d(t,"ADD_FACTORY",(function(){return r.a})),n.d(t,"ADD_ORDER",(function(){return r.b})),n.d(t,"ADD_STORE",(function(){return r.c})),n.d(t,"ADD_TYPES",(function(){return r.d})),n.d(t,"CLIENT_SAVE_HISTORY",(function(){return r.f})),n.d(t,"CLIENT_TENANT",(function(){return r.g})),n.d(t,"EDIT_FACTORY",(function(){return r.h})),n.d(t,"EDIT_ORDER",(function(){return r.i})),n.d(t,"EDIT_STORE",(function(){return r.j})),n.d(t,"EDIT_TYPES",(function(){return r.k})),n.d(t,"FACTORIES_SAVE_HISTORY",(function(){return r.l})),n.d(t,"FACTORY_MARKER",(function(){return r.m})),n.d(t,"FACTORY_TYPES",(function(){return r.n})),n.d(t,"MAPBOX_TOKEN",(function(){return r.o})),n.d(t,"MOVE_FACTORY",(function(){return r.p})),n.d(t,"MOVE_ORDER",(function(){return r.q})),n.d(t,"MOVE_STORE",(function(){return r.r})),n.d(t,"ORDER_MARKER",(function(){return r.s})),n.d(t,"ORDER_TYPES",(function(){return r.t})),n.d(t,"REMOVE_FACTORY",(function(){return r.u})),n.d(t,"REMOVE_ORDER",(function(){return r.v})),n.d(t,"REMOVE_STORE",(function(){return r.w})),n.d(t,"SAVE_HISTORY",(function(){return r.x})),n.d(t,"STORE_MARKER",(function(){return r.y})),n.d(t,"USER_INFO",(function(){return r.z}));var i=n(162);n.o(i,"getDetailDirections")&&n.d(t,"getDetailDirections",(function(){return i.getDetailDirections})),n.o(i,"keyGenerator")&&n.d(t,"keyGenerator",(function(){return i.keyGenerator}));var a=n(163);n.d(t,"getDetailDirections",(function(){return a.a})),n.d(t,"keyGenerator",(function(){return a.b}))},162:function(e,t){},163:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return l}));var r=n(40),i=n.n(r),a=n(56),c=n(100),o=n.n(c),s=n(11),d=(n(96),function(){return String(Date.now())}),u=function(e){var t,n;return{orders:null===e||void 0===e||null===(t=e.orders)||void 0===t?void 0:t.detail.map((function(e){return{latitude:e.latitude,longitude:e.longitude,productType:e.productType,quantity:e.quantity,time:e.key}})),factories:null===e||void 0===e||null===(n=e.factories)||void 0===n?void 0:n.detail.map((function(e){return{latitude:e.latitude,longitude:e.longitude,productType:e.productType,capacity:e.quantity,cost:e.cost}}))}},l=function(){var e=Object(a.a)(i.a.mark((function e(t){var n,r,a,c,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u(t),r=n.orders,a=n.factories,c=[],d=[],a.forEach((function(e){r.forEach((function(t){var n="".concat(e.longitude,",").concat(e.latitude,";").concat(t.longitude,",").concat(t.latitude);c.push(o()({method:"get",url:"https://api.mapbox.com/directions/v5/mapbox/walking/".concat(n),params:{geometries:"geojson",access_token:s.MAPBOX_TOKEN}}))}))})),e.next=6,Promise.all(c).then((function(e){e.forEach((function(e){d.push(e.data.routes[0].geometry.coordinates)}))}));case 6:return e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},315:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(31),c=n.n(a),o=n(18),s=n(24),d=n(29),u=n(76),l=n(19),j=n(11),p=n(36),b=n(328),O=n(3);function x(){return Object(O.jsx)(b.a,{style:{width:"1.5em",height:"1.5em"}})}var h=i.a.memo(x),f=n(329);function g(){return Object(O.jsx)(f.a,{style:{width:"1.5em",height:"1.5em"}})}var y=i.a.memo(g),m=n(330);function v(){return Object(O.jsx)(m.a,{style:{width:"1.5em",height:"1.5em"}})}var R,E,T,k,w,D,_,S,A,I,q,C,M,F,V,P,Y,K,N,L,z,H,U,G,B,J,W,X,Z,Q,$,ee,te,ne,re,ie=i.a.memo(v),ae=function(e){var t=e.type,n=e.detail,r=e.markersDispatch,i=null,a="";t===j.ORDER_MARKER?(i=Object(O.jsx)(h,{}),a=j.MOVE_ORDER):t===j.STORE_MARKER?(i=Object(O.jsx)(ie,{}),a=j.MOVE_STORE):(i=Object(O.jsx)(y,{}),a=j.MOVE_FACTORY);return Object(O.jsx)(O.Fragment,{children:null===n||void 0===n?void 0:n.map((function(e){return Object(O.jsx)(u.b,{longitude:e.longitude,latitude:e.latitude,offsetTop:-20,offsetLeft:-10,draggable:!0,onDragEnd:function(t){!function(e,t){var i={key:t.key,type:t.type,latitude:e.lngLat[1],longitude:e.lngLat[0],productType:t.productType,quantity:t.quantity,cost:t.cost},c=Object(p.a)(n),o=c.findIndex((function(e){return e.key===t.key}));c.splice(o,1,i),r({type:a,detail:c})}(t,e)},children:i},e.key)}))})},ce=function(e){var t,n,r=e.totalMarkers,i=e.markersDispatch;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(ae,{type:j.ORDER_MARKER,detail:null===(t=r.orders)||void 0===t?void 0:t.detail,markersDispatch:i}),Object(O.jsx)(ae,{type:j.FACTORY_MARKER,detail:null===(n=r.factories)||void 0===n?void 0:n.detail,markersDispatch:i})]})},oe=n(40),se=n.n(oe),de=n(56),ue=n(326),le=n(194),je=n(319),pe=n(334),be=n(335),Oe=n(336),xe=n(323),he=l.b.div(R||(R=Object(o.a)(["\n  margin: 0px;\n  outline: none;\n  padding: 0px;\n  width: auto;\n  min-height: 640px;\n"]))),fe=l.b.div(E||(E=Object(o.a)(["\n  padding-bottom: 112px;\n  padding-top: 72px;\n  background: #f0f2f5;\n"]))),ge=l.b.div(T||(T=Object(o.a)(["\n  display: flex;\n  margin: 0 auto;\n  padding: 20px 0;\n  position: relative;\n  width: 980px;\n"]))),ye=l.b.div(k||(k=Object(o.a)(["\n  margin-right: 0;\n  padding-right: 32px;\n  width: 580px;\n  /* max-width: 580px; */\n"]))),me=l.b.h2(w||(w=Object(o.a)(["\n  font-size: 29px;\n  font-weight: normal;\n  line-height: 32px;\n  width: 500px;\n"]))),ve=l.b.div(D||(D=Object(o.a)(["\n  display: inline-block;\n  vertical-align: top;\n"]))),Re=l.b.div(_||(_=Object(o.a)(["\n  height: 456px;\n  width: 396px;\n"]))),Ee=l.b.div(S||(S=Object(o.a)(["\n  padding: 18px 0px 24px 0px;\n  text-align: center;\n  align-items: center;\n  border: none;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgb(0 0 0 / 10%), 0 8px 16px rgb(0 0 0 / 10%);\n  box-sizing: border-box;\n  margin: 40px 0 0;\n  width: 396px;\n  background: #ffffff;\n  .ant-input {\n    border-radius: 6px;\n    font-size: 18px;\n    padding: 14px 16px;\n    width: 364px;\n    height: 52px;\n  }\n  .login-form-button {\n    height: 48px;\n    background-color: #1877f2;\n    width: 364px;\n    padding: 0 16px;\n    line-height: 48px;\n    font-size: 21px;\n    border-radius: 6px;\n  }\n  .register-button {\n    height: 48px;\n    border: none;\n    border-radius: 6px;\n    font-size: 18px;\n    line-height: 48px;\n    padding: 0 16px;\n    background-color: #42b72a;\n  }\n"]))),Te=l.b.div(A||(A=Object(o.a)(["\n  border-top: none;\n  color: #1c1e21;\n  font-size: 15px;\n  padding-top: 0;\n  font-weight: normal;\n  margin-top: 28px;\n  text-align: center;\n"]))),ke=Object(l.b)(xe.a)(I||(I=Object(o.a)(["\n  input {\n    height: 42px;\n    background: #f5f6f7 !important;\n  }\n  .ant-input {\n    background: #f5f6f7 !important;\n  }\n  .ant-col {\n    max-width: 100%;\n  }\n  .ant-input-group-wrapper {\n    width: 399px;\n  }\n  #register_email {\n    width: 399px;\n  }\n  .ant-modal-body {\n    padding: 16px;\n  }\n  .ant-input-password,\n  .ant-input {\n    /* height: 42px; */\n    /* padding: 0 0 0 11px !important; */\n    font-size: 16px;\n    line-height: 16px;\n    /* background: transparent; */\n    border-radius: 5px;\n    margin: 0px;\n    color: #1c1e21;\n  }\n  .ant-input-affix-wrapper {\n    width: 399px;\n    background: #f5f6f7 !important;\n  }\n  .ant-input-password {\n    padding: 0 11px 0 11px !important;\n  }\n  .first-name, .last-name {\n    width: 194px;\n  }\n  .first-name {\n    /* margin-right: 8px; */\n  }\n"]))),we=n(317),De=n(324),_e=l.b.div(q||(q=Object(o.a)(["\n  width: 310px;\n  z-index: 100;\n  position: absolute;\n\n  .ant-menu-inline-collapsed {\n    width: 46px;\n  }\n  .ant-btn {\n    margin-right: 4px;\n    opacity: 0.88;\n  }\n"]))),Se=Object(l.b)(xe.a)(C||(C=Object(o.a)(["\n  width: 300px !important;\n  .ant-modal-close-x {\n    width: 46px;\n    height: 46px;\n  }\n  .ant-input-number {\n    width: 100% !important;\n  }\n"]))),Ae=l.b.div(M||(M=Object(o.a)(["\n  max-height: 166px;\n  background: #ffffff;\n  overflow: auto;\n  .ant-list-item {\n    position: relative;\n  }\n"]))),Ie=l.b.div(F||(F=Object(o.a)(["\n  display: flex;\n  .ant-btn {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 32px;\n    height: 32px;\n    line-height: 14px;\n    margin-right: 2px;\n  }\n  .ant-btn > .anticon {\n    line-height: 0px;\n  }\n  path {\n    fill: #ffffff;\n  }\n"]))),qe=l.b.div(V||(V=Object(o.a)(["\n  display: flex;\n"]))),Ce=l.b.div(P||(P=Object(o.a)(["\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 30px;\n  width: 25px;\n  margin-left: 4px;\n  svg {\n    transition-duration: 0.3s;\n    &:hover {\n      transform: scale(1.2);\n    }\n  }\n"]))),Me=(l.b.div(Y||(Y=Object(o.a)(["\n  display: flex;\n"]))),l.b.div(K||(K=Object(o.a)(["\n  display: flex;\n  position: absolute;\n  height: 100%;\n  right: 5px;\n  align-items: flex-end;\n"])))),Fe=l.b.div(N||(N=Object(o.a)(["\n  display: flex;\n  flex-flow: column;\n"]))),Ve=Object(l.b)(we.a.Header)(L||(L=Object(o.a)(["\n  height: 32px;\n  padding: 0px;\n  display: flex;\n  justify-content: space-between;\n  .ant-btn:hover {\n    &:hover {\n      color: #40a9ff;\n      border-color: #40a9ff;\n    }\n  }\n  .ant-btn:focus {\n    color: black;\n    border-color: black;\n  }\n"]))),Pe=Object(l.b)(De.a)(z||(z=Object(o.a)(["\n  .ant-drawer-mask {\n    /* opacity: 0 !important; */\n    background-color: rgba(0, 0, 0, 0);\n  }\n  .anticon-rollback {\n    position: absolute;\n    right: 5px;\n    margin-bottom: 2px;\n    transition-duration: 0.3s;\n    &:hover {\n      cursor: pointer;\n      transform: scale(1.2);\n    }\n  }\n"]))),Ye=n(74),Ke=n(322),Ne=n(318),Le=n(92),ze=n(331),He=n(332),Ue=n(333),Ge={position:{latitude:37.7577,longitude:-122.4376},orders:{type:j.ORDER_MARKER,detail:[]},stores:{type:j.STORE_MARKER,detail:[]},factories:{type:j.FACTORY_MARKER,detail:[]}},Be=function(e,t){var n,r,i;switch(console.log("action",t),t.type){case j.ADD_ORDER:var a=[].concat(Object(p.a)(e.orders.detail),[{key:Object(j.keyGenerator)(),type:j.ORDER_MARKER,latitude:t.latitude,longitude:t.longitude,productType:t.productType,quantity:t.quantity}]);return console.log("newUserDetail",a),Object(s.a)(Object(s.a)({},e),{},{orders:{type:j.ORDER_MARKER,detail:a}});case j.ADD_STORE:var c=[].concat(Object(p.a)(e.stores.detail),[{key:Object(j.keyGenerator)(),type:j.STORE_MARKER,latitude:t.latitude,longitude:t.longitude,productType:t.productType,quantity:t.quantity}]);return Object(s.a)(Object(s.a)({},e),{},{stores:{type:j.STORE_MARKER,detail:c}});case j.ADD_FACTORY:var o=[].concat(Object(p.a)(e.factories.detail),[{key:Object(j.keyGenerator)(),type:j.FACTORY_MARKER,latitude:t.latitude,longitude:t.longitude,productType:t.productType,quantity:t.quantity,cost:t.cost}]);return Object(s.a)(Object(s.a)({},e),{},{factories:{type:j.FACTORY_MARKER,detail:o}});case j.REMOVE_ORDER:var d=Object(p.a)(e.orders.detail);return d.splice(d.findIndex((function(e){return e.key===t.key})),1),Object(s.a)(Object(s.a)({},e),{},{orders:{type:j.ORDER_MARKER,detail:d}});case j.REMOVE_STORE:var u=Object(p.a)(e.stores.detail);return u.splice(u.findIndex((function(e){return e.key===t.key})),1),Object(s.a)(Object(s.a)({},e),{},{stores:{type:j.STORE_MARKER,detail:u}});case j.REMOVE_FACTORY:var l=Object(p.a)(e.factories.detail);return l.splice(l.findIndex((function(e){return e.key===t.key})),1),Object(s.a)(Object(s.a)({},e),{},{factories:{type:j.FACTORY_MARKER,detail:l}});case j.MOVE_ORDER:return Object(s.a)(Object(s.a)({},e),{},{orders:{type:j.ORDER_MARKER,detail:t.detail}});case j.MOVE_STORE:return Object(s.a)(Object(s.a)({},e),{},{stores:{type:j.STORE_MARKER,detail:t.detail}});case j.MOVE_FACTORY:return Object(s.a)(Object(s.a)({},e),{},{factories:{type:j.FACTORY_MARKER,detail:t.detail}});case j.EDIT_ORDER:var b={key:t.key,type:t.markerType,latitude:t.latitude,longitude:t.longitude,productType:t.productType,quantity:t.quantity},O=Object(p.a)(null===e||void 0===e||null===(n=e.orders)||void 0===n?void 0:n.detail),x=O.findIndex((function(e){return e.key===t.key}));return O.splice(x,1,b),Object(s.a)(Object(s.a)({},e),{},{orders:{type:j.ORDER_MARKER,detail:O}});case j.EDIT_FACTORY:var h={key:t.key,type:t.markerType,latitude:t.latitude,longitude:t.longitude,productType:t.productType,quantity:t.quantity},f=Object(p.a)(null===e||void 0===e||null===(r=e.factories)||void 0===r?void 0:r.detail),g=f.findIndex((function(e){return e.key===t.key}));return f.splice(g,1,h),Object(s.a)(Object(s.a)({},e),{},{factories:{type:j.FACTORY_MARKER,detail:f}});case j.EDIT_STORE:var y={key:t.key,type:t.markerType,latitude:t.latitude,longitude:t.longitude,productType:t.productType,quantity:t.quantity},m=Object(p.a)(null===e||void 0===e||null===(i=e.stores)||void 0===i?void 0:i.detail),v=m.findIndex((function(e){return e.key===t.key}));return m.splice(v,1,y),Object(s.a)(Object(s.a)({},e),{},{stores:{type:j.STORE_MARKER,detail:m}});default:throw new Error}},Je=[{time:"12314",detail:"factories\u7684\u6570\u7ec4 []",productType:"test"}],We=function(e,t){switch(console.log("\u770b\u770baction",t),t.type){case j.CLIENT_SAVE_HISTORY:console.log("You saved your orders ");var n=Object(p.a)(e);return n.push({time:(new Date).toLocaleString(),detail:"client history test"}),n;case j.FACTORIES_SAVE_HISTORY:console.log("You saved your histories ");var r=Object(p.a)(e);return r.push({time:(new Date).toLocaleString(),detail:"factories history test",productType:"test"}),r;case j.SAVE_HISTORY:var i=Object(p.a)(e);return i.push({time:(new Date).toLocaleString(),detail:"factories history test",productType:"test"}),i;default:throw new Error}},Xe=function(e){var t=e.collapsed,n=(e.tenantType,e.factoriesDetail,e.ordersDetail,e.toggleCollapsed),i=e.handleOpenAddModal,a=e.handleShowPath,c=Object(r.useState)(!1),o=Object(d.a)(c,2),s=o[0],u=o[1],l=Object(r.useReducer)(We,Je),p=Object(d.a)(l,2),x=p[0];p[1];return Object(r.useEffect)((function(){}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(Ve,{children:[Object(O.jsx)(Ie,{children:Object(O.jsxs)(qe,{children:[Object(O.jsx)(Ye.a,{type:"primary",onClick:function(){return n()},children:t?Object(O.jsx)(ze.a,{}):Object(O.jsx)(He.a,{})}),Object(O.jsx)(Ye.a,{type:"primary",onClick:function(){i(j.ADD_ORDER)},children:Object(O.jsx)(b.a,{})}),Object(O.jsx)(Ye.a,{type:"primary",onClick:function(){return i(j.ADD_FACTORY)},children:Object(O.jsx)(f.a,{})})]})}),Object(O.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Ke.a,{style:{marginRight:"6px"}}),Object(O.jsx)(Ye.a,{style:{marginRight:"6px"},onClick:function(){a()},children:"Show Path"}),Object(O.jsx)(Ye.a,{style:{marginRight:"6px"},onClick:function(){a(!0)},children:"Clear"})]}),Object(O.jsx)(Ye.a,{onClick:function(){console.log("save snapshot")},children:"Snapshot"})]}),Object(O.jsx)("div",{style:{lineHeight:"32px",color:"white"},children:"wuwenqi.depp"}),Object(O.jsx)("div",{style:{display:"flex"},children:Object(O.jsx)(Ye.a,{onClick:function(){return u(!0)},children:"History"})})]}),Object(O.jsx)(Pe,{visible:s,closable:!0,onClose:function(){return u(!1)},children:x.length>0?Object(O.jsxs)(je.b,{size:"large",children:[Object(O.jsxs)("div",{children:["Histories",Object(O.jsx)("div",{children:"(Unsaved changes will be cleared.)"})]}),Object(O.jsx)(Ne.a,{style:{marginTop:"5px"}}),Object(O.jsx)(Ke.a,{onPressEnter:function(e){console.log("values",e)},id:"factories-search"}),x.map((function(e){return Object(O.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(O.jsxs)(je.b.Item,{children:[Object(O.jsx)("div",{children:e.time}),Object(O.jsx)("div",{children:null===e||void 0===e?void 0:e.productType})]}),Object(O.jsx)(Ue.a,{onClick:function(){console.log("rollback history",e)}})]})}))]}):Object(O.jsx)(Le.a,{image:Le.a.PRESENTED_IMAGE_SIMPLE})})]})},Ze=n(320),Qe=n(321),$e=function(e){var t=e.modalVisible,n=e.currentDetail,i=e.handleModalOk,a=e.setModalVisible,c=Ze.a.useForm(),o=Object(d.a)(c,1)[0],s=function(e){i(e.longitude,e.latitude,e.productType,e.quantity)};return Object(r.useEffect)((function(){o.setFieldsValue({latitude:n.latitude,longitude:n.longitude,productType:n.productType,quantity:n.quantity})}),[o,n.latitude,n.longitude,n.productType,n.quantity]),Object(O.jsx)(Se,{forceRender:!0,visible:t,onCancel:function(){return a(!1)},maskStyle:{background:"transparent"},bodyStyle:{paddingTop:"50px"},onOk:function(){return[o.validateFields().then((function(e){console.log("\u8868\u5355\u7684\u9a8c\u8bc1\u503c",e),s(e),a(!1)}))]},children:Object(O.jsxs)(Ze.a,{form:o,name:"markerDetailChange",onFinish:s,children:[Object(O.jsx)(Ze.a.Item,{label:"latitude",name:"latitude",rules:[{required:!0,message:"Latitude is required!"}],children:Object(O.jsx)(Qe.a,{value:n.latitude})}),Object(O.jsx)(Ze.a.Item,{label:"longitude",name:"longitude",rules:[{required:!0,message:"Longitude is required!"}],children:Object(O.jsx)(Qe.a,{value:n.longitude})}),Object(O.jsx)(Ze.a.Item,{label:"productType",name:"productType",rules:[{required:!0,message:"ProductType is required!"}],children:Object(O.jsx)(Ke.a,{value:n.productType,type:"text"})}),Object(O.jsx)(Ze.a.Item,{label:"quantity",name:"quantity",rules:[{required:!0,message:"Quantity is required!"}],children:Object(O.jsx)(Qe.a,{value:n.quantity})})]})})},et=function(e){var t=e.modalVisible,n=e.currentDetail,i=e.handleModalOk,a=e.setModalVisible,c=Ze.a.useForm(),o=Object(d.a)(c,1)[0],s=function(e){i(e.longitude,e.latitude,e.productType,e.quantity,e.cost)};return Object(r.useEffect)((function(){o.setFieldsValue({latitude:n.latitude,longitude:n.longitude,productType:n.productType,quantity:n.quantity,cost:n.cost})}),[o,n.latitude,n.longitude,n.productType,n.quantity,n.cost]),Object(O.jsx)(Se,{forceRender:!0,visible:t,onCancel:function(){return a(!1)},maskStyle:{background:"transparent"},bodyStyle:{paddingTop:"50px"},onOk:function(){return[o.validateFields().then((function(e){console.log("\u8868\u5355\u7684\u9a8c\u8bc1\u503c",e),s(e),a(!1)}))]},children:Object(O.jsxs)(Ze.a,{form:o,name:"markerDetailChange",onFinish:s,children:[Object(O.jsx)(Ze.a.Item,{label:"latitude",name:"latitude",rules:[{required:!0,message:"Latitude is required!"}],children:Object(O.jsx)(Qe.a,{value:n.latitude})}),Object(O.jsx)(Ze.a.Item,{label:"longitude",name:"longitude",rules:[{required:!0,message:"Longitude is required!"}],children:Object(O.jsx)(Qe.a,{value:n.longitude})}),Object(O.jsx)(Ze.a.Item,{label:"productType",name:"productType",rules:[{required:!0,message:"ProductType is required!"}],children:Object(O.jsx)(Ke.a,{value:n.productType,type:"text"})}),Object(O.jsx)(Ze.a.Item,{label:"quantity",name:"quantity",rules:[{required:!0,message:"quantity is required!"}],children:Object(O.jsx)(Qe.a,{value:n.quantity})}),Object(O.jsx)(Ze.a.Item,{label:"cost",name:"cost",rules:[{required:!0,message:"Cost is required!"}],children:Object(O.jsx)(Qe.a,{value:n.cost})})]})})},tt=ue.a.SubMenu,nt=function(e){e.mapInstance,e.currentPaths;var t=e.currentViewport,n=e.onViewportChange,i=e.totalMarkers,a=e.markersDispatch,c=(e.tenantType,e.setCurrentPaths),o=i.orders,s=(i.stores,i.factories),u=Object(r.useState)(!0),l=Object(d.a)(u,2),p=l[0],x=l[1],h=Object(r.useState)(!1),g=Object(d.a)(h,2),y=g[0],m=g[1],v=Object(r.useState)({latitude:0,longitude:0,productType:"",quantity:0,cost:0}),R=Object(d.a)(v,2),E=R[0],T=R[1],k=Object(r.useState)(""),w=Object(d.a)(k,2),D=w[0],_=w[1],S=Object(r.useState)({}),A=Object(d.a)(S,2),I=A[0],q=A[1],C=Object(r.useState)(!1),M=Object(d.a)(C,2),F=M[0],V=M[1],P=Object(r.useState)({}),Y=Object(d.a)(P,2),K=Y[0],N=Y[1];Object(r.useEffect)((function(){N(JSON.parse(sessionStorage.getItem("userInfo")||""))}),[]),Object(r.useEffect)((function(){T({latitude:t.latitude||37,longitude:t.longitude||-122,productType:"",quantity:0,cost:0})}),[t.latitude,t.longitude]);var L=function(e,t){q(e),_(t),t===j.EDIT_ORDER?T({longitude:e.longitude||0,latitude:e.latitude||0,productType:e.productType||"",quantity:e.quantity||0}):t===j.EDIT_FACTORY&&T({longitude:e.longitude||0,latitude:e.latitude||0,productType:e.productType||"",cost:(null===e||void 0===e?void 0:e.cost)||0}),m(!0)},z=function(e,t,n,r,i){j.ADD_TYPES.includes(D)?D===j.ADD_STORE?a({type:D,longitude:e,latitude:t,productType:n,quantity:r}):a({type:D,longitude:e,latitude:t,productType:n,quantity:r,cost:i}):j.EDIT_TYPES.includes(D)&&(D===j.EDIT_ORDER?a({type:D,key:I.key,markerType:I.type,longitude:e,latitude:t,productType:n,quantity:r}):a({type:D,key:I.key,markerType:I.type,longitude:e,latitude:t,productType:n,quantity:r,cost:i})),m(!1)},H=function(e,t){a({type:e,key:t})},U=function(){var e=Object(de.a)(se.a.mark((function e(){var t,n=arguments;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],console.log("\u64cd\u4f5c\u8def\u5f84"),!0!==t){e.next=8;break}console.log("clear",t),c([]),V(!1),e.next=17;break;case 8:if(F){e.next=16;break}return console.log("\u8def\u5f84\u7ed8\u5236\u4e2d"),e.next=12,Object(j.getDetailDirections)(i).then((function(e){console.log("res",e),c(e)}));case 12:V(!0),console.log("\u8def\u5f84\u7ed8\u5236\u5b8c\u6210"),e.next=17;break;case 16:le.b.warning("Please empty first or save and then empty");case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Xe,{factoriesDetail:i.factories.detail,ordersDetail:i.orders.detail,collapsed:p,tenantType:null===K||void 0===K?void 0:K.userType,toggleCollapsed:function(){x(!p)},handleOpenAddModal:function(e){_(e),e===j.ADD_ORDER?T({longitude:t.longitude||0,latitude:t.latitude||0,productType:"",quantity:0}):e===j.ADD_FACTORY&&T({longitude:t.longitude||0,latitude:t.latitude||0,productType:"",cost:0}),m(!0)},handleShowPath:U}),Object(O.jsxs)(_e,{children:[Object(O.jsxs)(ue.a,{mode:"inline",theme:"dark",inlineCollapsed:p,children:[Object(O.jsx)(tt,{icon:Object(O.jsx)(b.a,{}),title:"Order Markers",children:Object(O.jsx)(Ae,{children:Object(O.jsx)(je.b,{bordered:!0,size:"small",dataSource:o.detail,renderItem:function(e){return Object(O.jsxs)(je.b.Item,{children:[Object(O.jsxs)(Fe,{children:[Object(O.jsx)("div",{children:"latitude: ".concat(e.latitude)}),Object(O.jsx)("div",{children:"longitude: ".concat(e.longitude)}),Object(O.jsx)("div",{children:"product type: ".concat(e.productType)}),Object(O.jsx)("div",{children:"quantity: ".concat(e.quantity)})]}),Object(O.jsxs)(Me,{children:[Object(O.jsx)(Ce,{children:Object(O.jsx)(pe.a,{onClick:function(){return L(e,j.EDIT_ORDER)}})}),Object(O.jsx)(Ce,{children:Object(O.jsx)(be.a,{onClick:function(){return n(e)}})}),Object(O.jsx)(Ce,{children:Object(O.jsx)(Oe.a,{onClick:function(){return H(j.REMOVE_ORDER,e.key)}})})]})]},e.key)}})})},"sub"),Object(O.jsx)(tt,{icon:Object(O.jsx)(f.a,{}),title:"Factory Markers",children:Object(O.jsx)(Ae,{children:Object(O.jsx)(je.b,{bordered:!0,size:"small",dataSource:s.detail,renderItem:function(e){return Object(O.jsxs)(je.b.Item,{children:[Object(O.jsxs)(Fe,{children:[Object(O.jsx)("div",{children:"latitude: ".concat(e.latitude)}),Object(O.jsx)("div",{children:"longitude: ".concat(e.longitude)}),Object(O.jsx)("div",{children:"product type: ".concat(e.productType)}),Object(O.jsx)("div",{children:"quantity: ".concat(e.quantity)}),Object(O.jsx)("div",{children:"cost: ".concat(e.cost)})]}),Object(O.jsxs)(Me,{children:[Object(O.jsx)(Ce,{children:Object(O.jsx)(pe.a,{onClick:function(){L(e,j.EDIT_FACTORY)}})}),Object(O.jsx)(Ce,{children:Object(O.jsx)(be.a,{onClick:function(){return n(e)}})}),Object(O.jsx)(Ce,{children:Object(O.jsx)(Oe.a,{onClick:function(){return H(j.REMOVE_FACTORY,e.key)}})})]})]},e.key)}})})},"sub1")]}),Object(O.jsx)($e,{setModalVisible:m,modalVisible:y&&j.ORDER_TYPES.includes(D),currentDetail:E,handleModalOk:z}),Object(O.jsx)(et,{setModalVisible:m,modalVisible:y&&j.FACTORY_TYPES.includes(D),currentDetail:E,handleModalOk:z})]})]})},rt=n.p+"static/media/WechatIMG418.67559d44.jpeg",it=n.p+"static/media/zhangyouwu.ae7c873b.jpeg",at=n.p+"static/media/xuyiruo.15ae516d.jpeg",ct=n.p+"static/media/hujiayi.0c0dce22.jpeg",ot=l.b.div(H||(H=Object(o.a)(["\n  position: relative;\n  padding: 2rem;\n  max-width: 80rem;\n  width: 100%;\n  height: 100%;\n  margin: 0px;\n"]))),st=l.b.div(U||(U=Object(o.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n"]))),dt=l.b.div(G||(G=Object(o.a)(["\n  margin: 10px;\n  display: inline-block;\n  width: 6rem;\n  height: 8rem;\n  text-decoration: none;\n  text-align: center;\n  color: rgb(43, 72, 69);\n"]))),ut=l.b.img(B||(B=Object(o.a)(["\n  border-radius: 50%;\n  height: 88px;\n  width: 88px;\n  border: 4px solid transparent;\n  box-shadow: rgb(0 0 0 / 30%) 0px 0px 0px;\n  transition: border 0.5s ease 0s, box-shadow 0.5s ease 0s;\n  opacity: 0.9;\n"]))),lt=l.b.h2(J||(J=Object(o.a)(["\n  text-align: center;\n"]))),jt=function(){return Object(O.jsx)("section",{style:{background:"rgb(232, 232, 232)",display:"flex",justifyContent:"center"},children:Object(O.jsx)(ot,{children:Object(O.jsxs)("div",{children:[Object(O.jsx)(lt,{children:"Contributors"}),Object(O.jsxs)(st,{children:[Object(O.jsxs)(dt,{children:[Object(O.jsx)(ut,{src:"".concat(rt)}),Object(O.jsx)("div",{children:"Wu Wenqi"})]}),Object(O.jsxs)(dt,{children:[Object(O.jsx)(ut,{src:"".concat(it)}),Object(O.jsx)("div",{children:"Zhang Youwu"})]}),Object(O.jsxs)(dt,{children:[Object(O.jsx)(ut,{src:"".concat(at)}),Object(O.jsx)("div",{children:"Xu Yiruo"})]}),Object(O.jsxs)(dt,{children:[Object(O.jsx)(ut,{src:"".concat(ct)}),Object(O.jsx)("div",{children:"Hu Jiayi"})]})]})]})})})},pt=n(102),bt=l.b.div(W||(W=Object(o.a)(["\n  z-index: 1001;\n  height: 64px;\n  padding: 0px 36px;\n  top: 0px;\n  left: 0px;\n  width: 100vw;\n  user-select: none;\n  position: fixed;\n  background-color: rgb(16, 25, 24);\n  color: rgb(255, 255, 255);\n"]))),Ot=function(){return Object(O.jsxs)(bt,{children:[Object(O.jsx)("button",{children:Object(O.jsx)(pt.b,{to:"/login",children:"To login"})}),Object(O.jsx)("button",{children:Object(O.jsx)(pt.b,{to:"/application",children:"To Map"})})]})},xt=function(e){var t=e.currentPaths;return Object(O.jsx)(O.Fragment,{children:t.length&&t.map((function(e,t){return Object(O.jsx)(u.c,{id:String(e[0][0]*t),type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e}},children:Object(O.jsx)(u.a,{id:String(e[0][0]*t),type:"line",paint:{"line-color":"#abcccc","line-width":4},layout:{"line-join":"round","line-cap":"round"}})},String(e[0][0]*t))}))})},ht=(n(314),n(30)),ft=Object(l.a)(X||(X=Object(o.a)(["\n  ::-webkit-scrollbar {\n    display: none !important;\n  }\n  body {\n    overflow: hidden;\n    width: 100% !important;\n  }\n"]))),gt=function(){var e,t=Object(r.useState)({width:400,height:400,latitude:39.87523429950629,longitude:116.47133481200402,zoom:14}),n=Object(d.a)(t,2),i=n[0],a=n[1],c=Object(r.useState)([]),o=Object(d.a)(c,2),l=o[0],p=o[1],b=Object(r.useState)({}),x=Object(d.a)(b,2),h=x[0],f=x[1],g=Object(r.useReducer)(Be,Ge),y=Object(d.a)(g,2),m=y[0],v=y[1],R=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=window.sessionStorage.getItem(j.USER_INFO);e&&f(JSON.parse(e))}),[]);var E=null===R||void 0===R||null===(e=R.current)||void 0===e?void 0:e.getMap();return h?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(ft,{}),Object(O.jsx)(nt,{mapInstance:E,currentPaths:l,tenantType:j.CLIENT_TENANT,currentViewport:i,onViewportChange:function(e){a(Object(s.a)(Object(s.a)({},i),{},{latitude:e.latitude,longitude:e.longitude}))},totalMarkers:m,setCurrentPaths:p,markersDispatch:v}),Object(O.jsxs)(u.d,Object(s.a)(Object(s.a)({},i),{},{ref:R,mapStyle:"mapbox://styles/mapbox/dark-v9",width:"100vw",height:"100vh",onViewportChange:function(e){a(e)},mapboxApiAccessToken:j.MAPBOX_TOKEN,children:[Object(O.jsx)(ce,{totalMarkers:m,markersDispatch:v}),Object(O.jsx)(xt,{currentPaths:l})]}))]}):Object(O.jsx)(ht.a,{to:"/login"})},yt=n(103),mt=n(325),vt=n(327),Rt={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},Et={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},Tt=function(e){var t=e.modalVisible,n=e.setModalVisible,r=i.a.useState(!1),a=Object(d.a)(r,2),c=a[0],o=a[1],u=Ze.a.useForm(),l=Object(d.a)(u,1)[0],j=yt.a.Option,p=Object(O.jsx)(Ze.a.Item,{name:"prefix",noStyle:!0,initialValue:"86",children:Object(O.jsxs)(yt.a,{style:{width:70},children:[Object(O.jsx)(j,{value:"86",children:"+86"}),Object(O.jsx)(j,{value:"87",children:"+87"})]})});return Object(O.jsx)(ke,{width:432,title:"Register",visible:t,onOk:function(){o(!0),n(!1)},confirmLoading:c,onCancel:function(){console.log("Clicked cancel button"),n(!1)},footer:null,maskClosable:!1,keyboard:!1,maskStyle:{backgroundColor:"rgba(255, 255, 255, .8)"},children:Object(O.jsxs)(Ze.a,Object(s.a)(Object(s.a)({},Rt),{},{form:l,name:"register",onFinish:function(e){console.log("Received values of form: ",e)},scrollToFirstError:!0,children:[Object(O.jsx)(Ze.a.Item,{name:"username",rules:[{required:!0,message:"Username is required!"},{min:2,message:"Your username is too short!"}],children:Object(O.jsx)(Ke.a,{placeholder:"Username",type:"text"})}),Object(O.jsx)(Ze.a.Item,{name:"password",rules:[{required:!0,message:"Password is required!"},{min:6,message:"Your password is too short!"}],hasFeedback:!0,children:Object(O.jsx)(Ke.a.Password,{placeholder:"Password",type:"text"})}),Object(O.jsx)(Ze.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(O.jsx)(Ke.a,{placeholder:"email",type:"email"})}),Object(O.jsx)(Ze.a.Item,{name:"phone-number",rules:[{required:!0,len:11,message:"Please enter your 11 digit phone number!"}],children:Object(O.jsx)(Ke.a,{addonBefore:p,placeholder:"Phone Number"})}),Object(O.jsx)(Ze.a.Item,{name:"user-type",label:"user type",initialValue:"client",rules:[{required:!0,message:"Please pick an User Type!"}],children:Object(O.jsxs)(mt.a.Group,{children:[Object(O.jsx)(mt.a.Button,{value:"client",children:"client"}),Object(O.jsx)(mt.a.Button,{value:"company",children:"company"})]})}),Object(O.jsx)(Ze.a.Item,Object(s.a)(Object(s.a)({name:"agreement",valuePropName:"checked",rules:[{validator:function(e,t){return t?Promise.resolve():Promise.reject(new Error("Should accept agreement"))}}]},Et),{},{children:Object(O.jsxs)(vt.a,{children:["I have read the ",Object(O.jsx)("a",{href:"a",children:"agreement"})]})})),Object(O.jsx)(Ze.a.Item,Object(s.a)(Object(s.a)({},Et),{},{children:Object(O.jsx)(Ye.a,{type:"primary",htmlType:"submit",children:"Register"})}))]}))})},kt=n(96),wt=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],i=t[1],a=Object(r.useCallback)(function(){var e=Object(de.a)(se.a.mark((function e(t){var n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(kt.a)(t.username,t.password);case 2:(n=e.sent).data?(console.log("res.data",n.data),window.sessionStorage.setItem(j.USER_INFO,JSON.stringify(n.data)),window.location.href="/application"):le.b.warning("Username or password is Error!");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(O.jsxs)(he,{children:[Object(O.jsx)("div",{children:Object(O.jsx)(fe,{children:Object(O.jsxs)(ge,{children:[Object(O.jsxs)(ye,{children:[Object(O.jsx)("div",{style:{padding:"112px 0 16px"},children:Object(O.jsx)("img",{style:{width:"auto",height:"106px",margin:"-28px"},alt:"logo"})}),Object(O.jsx)(me,{children:"CFLP-CFLP-CFLP-CFLP"})]}),Object(O.jsx)(ve,{children:Object(O.jsxs)(Re,{children:[Object(O.jsx)(Ee,{children:Object(O.jsxs)(Ze.a,{name:"normal_login",className:"login-form",initialValues:{},onFinish:a,children:[Object(O.jsx)(Ze.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(O.jsx)(Ke.a,{placeholder:"email or phone number",type:"text"})}),Object(O.jsx)(Ze.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(O.jsx)(Ke.a,{type:"password",placeholder:"Password"})}),Object(O.jsx)(Ze.a.Item,{children:Object(O.jsx)(Ye.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Log in"})}),Object(O.jsx)("a",{className:"login-form-forgot",href:"https://www.baidu.com/",children:"Forgot password ?"}),Object(O.jsx)(Ne.a,{}),Object(O.jsx)(Ye.a,{type:"primary",htmlType:"button",className:"register-button",onClick:function(){i(!0)},children:"Register now"})]})}),Object(O.jsx)(Te,{children:"info"})]})})]})})}),Object(O.jsx)(Tt,{modalVisible:n,setModalVisible:i})]})},Dt=n.p+"static/media/hero.792d2d0b.jpeg",_t=l.b.div(Z||(Z=Object(o.a)(["\n  outline: none;\n"]))),St=l.b.div(Q||(Q=Object(o.a)(["\n  width: 100vw;\n  height: 100vh;\n"]))),At=l.b.div($||($=Object(o.a)(["\n  margin: 0px auto;\n  padding: 64px 0px 0px;\n"]))),It=l.b.section(ee||(ee=Object(o.a)(["\n  position: relative;\n  height: 30rem;\n  background: rgb(43, 72, 69);\n  color: rgb(255, 255, 255);\n  z-index: 0;\n"]))),qt=l.b.div(te||(te=Object(o.a)(["\n  position: absolute;\n  inset: 0px;\n  z-index: -1;\n"]))),Ct=l.b.div(ne||(ne=Object(o.a)(["\n  background-image: url(",");\n  background-size: cover;\n  background-position: center center;\n  height: 100%;\n"])),Dt),Mt=function(){return Object(O.jsx)(_t,{children:Object(O.jsxs)(St,{children:[Object(O.jsx)(Ot,{}),Object(O.jsx)(At,{children:Object(O.jsxs)("main",{children:[Object(O.jsx)(It,{children:Object(O.jsx)(qt,{children:Object(O.jsx)(Ct,{})})}),Object(O.jsx)(jt,{})]})})]})})};Object(l.a)(re||(re=Object(o.a)(["\n  ::-webkit-scrollbar {\n    display: none !important;\n  }\n  body {\n    overflow: hidden;\n  }\n  .ant-message {\n    top: 50px;\n  }\n"])));document.body.style.margin="0px";var Ft=function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(pt.a,{children:Object(O.jsxs)(ht.d,{children:[Object(O.jsx)(ht.b,{path:"/",exact:!0,component:function(){return Object(O.jsx)(ht.a,{to:"/home"})}}),Object(O.jsx)(ht.b,{path:"/home",component:Mt}),Object(O.jsx)(ht.b,{path:"/login",component:function(){return Object(O.jsx)(wt,{})}}),Object(O.jsx)(ht.b,{path:"/application",component:function(){return Object(O.jsx)(gt,{})}}),Object(O.jsx)(ht.b,{path:"*",component:function(){return Object(O.jsx)(ht.a,{to:"/home"})}})]})})})};c.a.render(Object(O.jsx)(Ft,{}),document.getElementById("root"))},96:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(40),i=n.n(r),a=n(56),c=n(97),o=n(100),s=n.n(o),d=(s.a.create({baseURL:c.e}),function(){var e=Object(a.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s()({method:"get",url:"https://qctz2d.fn.thelarkcloud.com/login",params:{username:t,password:n}});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},97:function(e,t,n){"use strict";n.d(t,"o",(function(){return r})),n.d(t,"m",(function(){return i})),n.d(t,"y",(function(){return a})),n.d(t,"s",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return d})),n.d(t,"v",(function(){return u})),n.d(t,"w",(function(){return l})),n.d(t,"u",(function(){return j})),n.d(t,"q",(function(){return p})),n.d(t,"r",(function(){return b})),n.d(t,"p",(function(){return O})),n.d(t,"i",(function(){return x})),n.d(t,"j",(function(){return h})),n.d(t,"h",(function(){return f})),n.d(t,"g",(function(){return g})),n.d(t,"f",(function(){return y})),n.d(t,"l",(function(){return m})),n.d(t,"d",(function(){return v})),n.d(t,"k",(function(){return R})),n.d(t,"t",(function(){return E})),n.d(t,"n",(function(){return T})),n.d(t,"x",(function(){return k})),n.d(t,"e",(function(){return w})),n.d(t,"z",(function(){return D}));var r="pk.eyJ1Ijoid3V3ZW5xaS1kZXBwIiwiYSI6ImNrbWE2cDJodzB6Z24yc28yeWxiZHd2aGwifQ.sW0Dt7X0RXnp5IZ7LTC_Aw",i="factoryMarker",a="storeMarker",c="userMarker",o="addUser",s="addStore",d="addFactory",u="removeUser",l="removeStore",j="removeFactory",p="moveUser",b="moveStore",O="moveFactory",x="editUser",h="editStore",f="editFactory",g="client",y="clientSaveHistory",m="factoriesSaveHistory",v=[o,d,s],R=[x,h,f],E=[o,x],T=[d,f],k="saveHistory",w="https://api.mapbox.com/directions/v5/mapbox/walking",D="userInfo"}},[[315,1,2]]]);
//# sourceMappingURL=main.d09d0060.chunk.js.map